# settings
NAME     = minishell
SRC      = \
	./libft/ft_tolower.c \
	./libft/ft_bzero.c \
	./libft/ft_lstinit_itr.c \
	./libft/ft_xorshift_u32.c \
	./libft/ft_isspace.c \
	./libft/ft_strincludes.c \
	./libft/ft_free_iter.c \
	./libft/ft_abs.c \
	./libft/ft_lstmap_bonus.c \
	./libft/ft_substr.c \
	./libft/ft_memcpy.c \
	./libft/ft_lst_to_array.c \
	./libft/ft_lstadd_front_bonus.c \
	./libft/ft_strrev.c \
	./libft/ft_strtolower.c \
	./libft/ft_memset.c \
	./libft/ft_lstnewcircular.c \
	./libft/ft_lstsize_bonus.c \
	./libft/ft_isascii.c \
	./libft/ft_toupper.c \
	./libft/ft_strrchr.c \
	./libft/ft_lstclear_bonus.c \
	./libft/ft_write_aligned_right.c \
	./libft/ft_isalnum.c \
	./libft/ft_strlcpy.c \
	./libft/ft_strleftalign.c \
	./libft/ft_memcmp.c \
	./libft/ft_swap_chr.c \
	./libft/ft_strlen.c \
	./libft/ft_putendl_fd.c \
	./libft/ft_utoa_base.c \
	./libft/ft_lstlast_bonus.c \
	./libft/ft_lstnew_bonus.c \
	./libft/ft_voidnop.c \
	./libft/ft_utoa.c \
	./libft/ft_atoi.c \
	./libft/ft_isprint.c \
	./libft/ft_mul_l.c \
	./libft/ft_dprintf.c \
	./libft/ft_ultoa_base_str.c \
	./libft/ft_lstpush.c \
	./libft/ft_strnstr.c \
	./libft/ft_lstfirst.c \
	./libft/fp_modules/fp_convert_int2str.c \
	./libft/fp_modules/fp_gen_uintstr.c \
	./libft/fp_modules/fp_to_upper.c \
	./libft/fp_modules/fp_gen_chrstr.c \
	./libft/fp_modules/fp_generate_cs.c \
	./libft/fp_modules/fp_convert_uint2str.c \
	./libft/fp_modules/fp_cut_string.c \
	./libft/fp_modules/fp_add_0x.c \
	./libft/fp_modules/fp_gen_intstr.c \
	./libft/fp_modules/fp_get_cs_len.c \
	./libft/fp_modules/fp_add_sign.c \
	./libft/fp_modules/fp_convert_uchr2str.c \
	./libft/fp_modules/fp_vdprint_cs.c \
	./libft/fp_modules/fp_print_aligned_right.c \
	./libft/fp_modules/fp_destroy_t_cs.c \
	./libft/fp_modules/fp_convert_ptr2str.c \
	./libft/fp_modules/fp_pad_for_num.c \
	./libft/fp_modules/fp_new_t_cs.c \
	./libft/fp_modules/fp_gen_str.c \
	./libft/fp_modules/fp_rewrite_special_behavior.c \
	./libft/fp_modules/fp_gen_ptrstr.c \
	./libft/fp_modules/fp_get_sign_type.c \
	./libft/fp_modules/fp_print_aligned_left.c \
	./libft/ft_memswap.c \
	./libft/ft_replace_last_newline.c \
	./libft/ft_strtol.c \
	./libft/ft_lstiter_bonus.c \
	./libft/ft_strjoin.c \
	./libft/ft_strcmp.c \
	./libft/ft_strtoupper.c \
	./libft/ft_memchr.c \
	./libft/ft_ifl.c \
	./libft/ft_add_l.c \
	./libft/ft_lsttocircular.c \
	./libft/ft_replace_random_alpha.c \
	./libft/ft_strnlen.c \
	./libft/ft_itoa.c \
	./libft/ft_putstr_fd.c \
	./libft/ft_write_aligned_left.c \
	./libft/ft_strtrim.c \
	./libft/ft_min.c \
	./libft/ft_lstat.c \
	./libft/ft_putchar_fd.c \
	./libft/ft_clamp.c \
	./libft/ft_printf.c \
	./libft/ft_bsearch.c \
	./libft/get_next_line.c \
	./libft/ft_strmapi.c \
	./libft/ft_isupper.c \
	./libft/ft_strncmp.c \
	./libft/ft_mkostemp.c \
	./libft/ft_nop.c \
	./libft/ft_array_to_lst.c \
	./libft/ft_includes.c \
	./libft/ft_lstdelone_bonus.c \
	./libft/ft_lstdel_content.c \
	./libft/ft_realloc.c \
	./libft/ft_strlcat.c \
	./libft/ft_striteri.c \
	./libft/ft_memmove.c \
	./libft/ft_errinfo.c \
	./libft/ft_strrightalign.c \
	./libft/ft_lstadd_back_bonus.c \
	./libft/ft_strmatch.c \
	./libft/ft_max.c \
	./libft/ft_strndup.c \
	./libft/ft_strchr.c \
	./libft/ft_set_errno.c \
	./libft/ft_split.c \
	./libft/ft_strdup.c \
	./libft/ft_islower.c \
	./libft/ft_getenv.c \
	./libft/ft_isdigit.c \
	./libft/ft_addr2uint32_t.c \
	./libft/ft_selection_sort.c \
	./libft/ft_putnbr_fd.c \
	./libft/ft_isalpha.c \
	./libft/ft_vdprintf.c \
	./libft/ft_strrepeat.c \
	./libft/ft_ltoa_inplace.c \
	./libft/ft_calloc.c \
	./libft/ft_lstpop.c \
	./lexical_analyze/tokenize/ms_tokenize_identify.c \
	./lexical_analyze/tokenize/ms_tokenize_blank.c \
	./lexical_analyze/tokenize/ms_tokenize_word.c \
	./lexical_analyze/tokenize/ms_tokenize_redirection.c \
	./lexical_analyze/tokenize/ms_tokenize_right_parenthesis.c \
	./lexical_analyze/tokenize/ms_create_token.c \
	./lexical_analyze/tokenize/ms_tokenize_pipe.c \
	./lexical_analyze/tokenize/ms_tokenize_double_quote.c \
	./lexical_analyze/tokenize/ms_tokenize_single_quote.c \
	./lexical_analyze/tokenize/ms_tokenize_equal.c \
	./lexical_analyze/tokenize/ms_tokenize_left_parenthesis.c \
	./lexical_analyze/tokenize/ms_tokenize_variable.c \
	./lexical_analyze/tokenize/ms_tokenize_newline.c \
	./lexical_analyze/tokenize/ms_tokenize_list.c \
	./lexical_analyze/ms_lexical_analyze.c \
	./lexical_analyze/ms_destroy_token.c \
	./lexical_analyze/ms_duplicate_token.c \
	./lexical_analyze/ms_destroy_token_wrapper.c \
	./execution/signal/ms_set_default_signal.c \
	./execution/expantion/ms_pathname_expantion_internal/ms_check_match_wildcard.c \
	./execution/expantion/ms_pathname_expantion_internal/ms_expand_path2.c \
	./execution/expantion/ms_pathname_expantion_internal/ms_pathname_expansion_wildcard.c \
	./execution/expantion/ms_pathname_expantion_internal/ms_get_file_list.c \
	./execution/expantion/ms_tilde_expansion.c \
	./execution/expantion/ms_parameter_expansion.c \
	./execution/expantion/ms_remove_null_children.c \
	./execution/expantion/ms_pathname_expansion.c \
	./execution/expantion/ms_quote_removal.c \
	./execution/ms_execute_command.c \
	./execution/memento/ms_save_environ_memento.c \
	./execution/memento/ms_memento_destroy.c \
	./execution/memento/ms_restore_environ_memento.c \
	./execution/ms_execute_lists.c \
	./execution/ms_execute_from_lsa.c \
	./execution/ms_expansion.c \
	./execution/ms_simple_command_execution..c \
	./execution/ms_run_redirects.c \
	./execution/ms_execute_pipeline.c \
	./execution/ms_run_assignment_variables.c \
	./execution/ms_run_pipeline.c \
	./execution/ms_execute_compound_list.c \
	./execution/ms_isbuiltin.c \
	./execution/ms_execution.c \
	./execution/ms_execute_list.c \
	./execution/ms_expand_commands.c \
	./main.c \
	./input/ms_skip_until_heredoc.c \
	./input/ms_set_delimita_list.c \
	./input/ms_init_heredoc.c \
	./input/ms_read_with_delimita.c \
	./input/ms_update_environs.c \
	./input/ms_input_heredoc.c \
	./input/ms_finalize_heredoc.c \
	./input/ms_skip_surround_quote.c \
	./input/ms_input.c \
	./input/ms_append_with_newline.c \
	./libms/ms_get_meta.c \
	./libms/ms_trim_end_newline.c \
	./libms/ms_export_env.c \
	./libms/ms_dup_escapedstr.c \
	./libms/ms_lst_print.c \
	./libms/ms_noop_del.c \
	./libms/ms_set_exit_status.c \
	./libms/ms_has_meta.c \
	./libms/ms_path_join.c \
	./libms/ms_dup_ntp2.c \
	./libms/ms_get_pwd.c \
	./libms/ms_dup_ntp3.c \
	./libms/ms_add_meta.c \
	./libms/ms_remove_envattr.c \
	./libms/ms_tilde_expansion.c \
	./libms/ms_get_status_from_meta.c \
	./libms/ms_getenv.c \
	./libms/ms_add_export.c \
	./libms/ms_find_export.c \
	./libms/ms_lst_append_tail.c \
	./libms/ms_destroy_ntp2.c \
	./libms/ms_destroy_ntp.c \
	./libms/ms_replace_joined_str.c \
	./libms/ms_perror_shell.c \
	./libms/ms_dup_ntp.c \
	./libms/ms_mnsh_subshell.c \
	./libms/ms_ntpsize.c \
	./libms/ms_perror_cmd2.c \
	./libms/ms_lst_to_ntp.c \
	./libms/ms_join_ntp.c \
	./libms/ms_get_full_path.c \
	./libms/ms_shell_atoi.c \
	./libms/ms_remove_export.c \
	./libms/ms_strdup_sep.c \
	./libms/ms_lstappend_tail.c \
	./libms/ms_set_envattr.c \
	./libms/ms_strpbrk.c \
	./libms/ms_isadir.c \
	./libms/ms_separate.c \
	./libms/ms_get_current_dir_name.c \
	./libms/ms_is_dir.c \
	./libms/ms_strstr.c \
	./libms/ms_add_string_to_lst.c \
	./libms/ms_import_env.c \
	./libms/ms_setenv.c \
	./libms/ms_export_exports.c \
	./libms/ms_add_envattr.c \
	./libms/ms_unsetenv.c \
	./libms/ms_dup_ntp4.c \
	./libms/ms_clear_environ.c \
	./libms/ms_exports.c \
	./libms/ms_identify.c \
	./libms/ms_normalize_path.c \
	./libms/ms_count_ntp.c \
	./libms/ms_replace_joined_str_right.c \
	./libms/ms_get_interactive_stat.c \
	./libms/ms_get_envattr.c \
	./libms/ms_has_envattr.c \
	./libms/ms_duplicate_node.c \
	./libms/ms_perror_cmd.c \
	./libms_internal/ms_int_ms_var_to_string.c \
	./libms_internal/ms_find_ms_var.c \
	./libms_internal/ms_int_import_on_initial.c \
	./libms_internal/ms_int_get_environ_variable.c \
	./libms_internal/ms_int_destroy_ms_var.c \
	./libms_internal/ms_int_validate_env_name.c \
	./libms_internal/ms_int_create_ms_var.c \
	./libms_internal/ms_int_generate_ms_var_from_text.c \
	./builtins/export/ms_builtin_export.c \
	./builtins/export/ms_escape_export_value.c \
	./builtins/export/ms_export_environs.c \
	./builtins/export/ms_export_variable_validate_arg.c \
	./builtins/export/ms_export_variables.c \
	./builtins/export/ms_export_print_command.c \
	./builtins/ms_builtin.c \
	./builtins/modules/ms_cdwd.c \
	./builtins/modules/ms_perror_invalid_option.c \
	./builtins/modules/getopt/ms_getopt_parse.c \
	./builtins/modules/getopt/ms_is_parsed.c \
	./builtins/modules/getopt/ms_getopt_init.c \
	./builtins/modules/getopt/ms_is_valid_statement.c \
	./builtins/modules/getopt/ms_skip_double_hyphen_if_needed.c \
	./builtins/modules/getopt/ms_go_is_option.c \
	./builtins/modules/getopt/ms_opt_is_valid.c \
	./builtins/pwd/ms_builtin_pwd.c \
	./builtins/exit/ms_builtin_exit.c \
	./builtins/exit/ms_parse_builtin_exit.c \
	./builtins/env-command/ms_builtin_env.c \
	./builtins/unset/ms_builtin_unset.c \
	./builtins/cd/ms_parse_builtin_cd_args.c \
	./builtins/cd/ms_perror_cd.c \
	./builtins/cd/ms_set_pwd_env.c \
	./builtins/cd/ms_builtin_cd.c \
	./builtins/cd/ms_get_cd_path.c \
	./builtins/cd/ms_resolve_with_cdpath.c \
	./builtins/cd/ms_print_usage_cd.c \
	./builtins/cd/ms_is_use_cdpath.c \
	./builtins/cd/ms_search_with_cdpath.c \
	./builtins/echo/ms_builtin_echo.c \
	./builtins/echo/ms_parse_builtin_echo_arg.c \
	./history/ms_history_truncate_file.c \
	./history/ms_write_history.c \
	./history/ms_clear_history.c \
	./history/ms_add_history.c \
	./history/ms_get_histcmd.c \
	./history/ms_add_mnsh_history.c \
	./history/ms_append_history.c \
	./history/ms_update_history_variable.c \
	./history/internal/ms_update_maxentries_from_env.c \
	./history/internal/ms_init_history.c \
	./history/internal/ms_add_history_history.c \
	./history/internal/ms_append_history_history.c \
	./history/internal/ms_read_history_history.c \
	./history/internal/ms_unstifle_history_history.c \
	./history/internal/ms_history_stifle_history_history.c \
	./history/internal/ms_truncate_history_history.c \
	./history/internal/ms_clear_history_history.c \
	./history/internal/ms_history.c \
	./history/internal/ms_write_history_history.c \
	./history/ms_unstifle_history.c \
	./history/ms_truncate_history.c \
	./history/ms_reset_histcmd.c \
	./history/ms_stifle_history.c \
	./history/ms_read_history.c \
	./global.c \
	./finalize/ms_cleanup_and_exit.c \
	./readline/ms_setup_readline_behavior.c \
	./readline/ms_readline.c \
	./readline/ms_setup_readline_handler.c \
	./syntax_analyze/ms_syntax_node_print.c \
	./syntax_analyze/ms_syntax_node_destroy_wrapper.c \
	./syntax_analyze/ms_syntax_node_ntp_destroy.c \
	./syntax_analyze/ms_syntax_node_find_child.c \
	./syntax_analyze/ms_syntax_node_copy.c \
	./syntax_analyze/ms_syntax_node_lstclear.c \
	./syntax_analyze/parse/ms_parse_declined.c \
	./syntax_analyze/parse/terminal/ms_parse_identify.c \
	./syntax_analyze/parse/terminal/ms_parse_newline.c \
	./syntax_analyze/parse/terminal/ms_parse_blank.c \
	./syntax_analyze/parse/terminal/ms_parse_word.c \
	./syntax_analyze/parse/terminal/ms_parse_right_parenthesis.c \
	./syntax_analyze/parse/terminal/ms_parse_pipe.c \
	./syntax_analyze/parse/terminal/ms_parse_single_quote.c \
	./syntax_analyze/parse/terminal/ms_parse_double_quote.c \
	./syntax_analyze/parse/terminal/ms_parse_equal.c \
	./syntax_analyze/parse/terminal/ms_parse_list_token.c \
	./syntax_analyze/parse/terminal/ms_parse_redirection.c \
	./syntax_analyze/parse/terminal/ms_parse_variable.c \
	./syntax_analyze/parse/terminal/ms_parse_all.c \
	./syntax_analyze/parse/terminal/ms_parse_left_parenthesis.c \
	./syntax_analyze/parse/nonterminal/ms_parse_redirection_word.c \
	./syntax_analyze/parse/nonterminal/ms_parse_user_input.c \
	./syntax_analyze/parse/nonterminal/ms_parse_list.c \
	./syntax_analyze/parse/nonterminal/ms_parse_assignment_word_name.c \
	./syntax_analyze/parse/nonterminal/ms_parse_double_quoted_word.c \
	./syntax_analyze/parse/nonterminal/ms_parse_assignment_command.c \
	./syntax_analyze/parse/nonterminal/ms_parse_instruction.c \
	./syntax_analyze/parse/nonterminal/ms_parse_assignment_word.c \
	./syntax_analyze/parse/nonterminal/ms_parse_single_quoted_word.c \
	./syntax_analyze/parse/nonterminal/ms_parse_simple_command.c \
	./syntax_analyze/parse/nonterminal/ms_parse_compound_list.c \
	./syntax_analyze/parse/nonterminal/ms_parse_pipeline.c \
	./syntax_analyze/parse/nonterminal/ms_parse_word_list.c \
	./syntax_analyze/parse/internal/ms_parse_symbol_item.c \
	./syntax_analyze/parse/internal/ms_syntax_node_check_declined.c \
	./syntax_analyze/parse/internal/ms_syntax_node_set_of_children.c \
	./syntax_analyze/parse/internal/ms_syntax_node_create_nonterminal.c \
	./syntax_analyze/parse/ms_parse_command.c \
	./syntax_analyze/ms_syntax_node_create.c \
	./syntax_analyze/helper/ms_parse_rules.c \
	./syntax_analyze/helper/ms_parse_rule.c \
	./syntax_analyze/helper/ms_lst_append_node.c \
	./syntax_analyze/helper/ms_parse_ebnf_one_method.c \
	./syntax_analyze/helper/ms_parse_ebnf_option.c \
	./syntax_analyze/helper/ms_parse_ebnf_repeat_method.c \
	./syntax_analyze/ms_syntax_node_to_string.c \
	./syntax_analyze/ms_syntax_node_destroy.c \
	./syntax_analyze/ms_syntax_node_get_child.c \
	./syntax_analyze/ms_syntax_node_filter.c \
	./syntax_analyze/ms_syntax_analyze.c \
	./syntax_analyze/ms_syntax_node_perror.c \
	./semantic_analyze/ms_lsa_set_heredoc.c \
	./semantic_analyze/lsa_destroy/ms_lsa_wordlist_destroy.c \
	./semantic_analyze/lsa_destroy/ms_lsa_pipeline_destroy.c \
	./semantic_analyze/lsa_destroy/ms_lsa_command_destroy.c \
	./semantic_analyze/lsa_destroy/ms_lsa_list_destroy.c \
	./semantic_analyze/lsa_destroy/ms_lsa_destroy.c \
	./semantic_analyze/lsa_destroy/ms_lsa_assignment_destroy.c \
	./semantic_analyze/lsa_destroy/ms_lsa_redirection_destroy.c \
	./semantic_analyze/ms_lsa_assignment.c \
	./semantic_analyze/ms_lsa_pipeline.c \
	./semantic_analyze/ms_lsa_command.c \
	./semantic_analyze/ms_wordlist_perror.c \
	./semantic_analyze/semantic_analyze.c \
	./semantic_analyze/ms_lsa_redirection.c \
	./semantic_analyze/ms_lsa_wordlist.c \
	./semantic_analyze/ms_lsa_list.c \
	./semantic_analyze/ms_lsa_lists.c \
	./semantic_analyze/heredoc/ms_set_readnodestream.c \
	./semantic_analyze/heredoc/ms_get_next_line_node.c \
	./semantic_analyze/heredoc/ms_compare_heredoc_input.c \
	./semantic_analyze/heredoc/ms_word_list_to_delimiter_string.c \
	./setup/ms_setup_history.c \
	./setup/ms_setup_export_environ.c \
	./setup/ms_var_minishell.c \
	./setup/ms_is_interactive.c \
	./setup/ms_setup_variable.c \
	./setup/ms_setup.c \
	./setup/ms_setup_global_variables.c \
	./ms_error/ms_perror_cwd.c

CC      = cc
CFLAGS = -Wall -Wextra -Werror -MMD -MP -I include
LDLIBS = -lreadline
CACHEDIR = cache

# generate from above variable
OBJS    = $(addprefix $(CACHEDIR)/,$(SRC:.c=.o))
DEPS    = $(addprefix $(CACHEDIR)/,$(SRC:.c=.d))

# PHONY rules
all: $(NAME)

clean:
	rm -rf $(CACHEDIR)

fclean: clean
	rm -rf $(NAME)

re: fclean all

sanitize: LDFLAGS += -fsanitize=leak
sanitize: CFLAGS += -fsanitize=leak
sanitize: debug

debug: LDFLAGS += -g -O0
debug: CFLAGS += -g -O0
debug: all

show:
	@echo variables value
	@printf "%s:\n\t%s\n" "NAME" "$(NAME)"
	@printf "%s:\n\t%s\n" "SRC" "$(SRC)"

-include $(DEPS)

# file rules
$(NAME): $(OBJS)
	$(CC) $(LDFLAGS) -o $@ $(filter %.o,$^) $(LDLIBS)

$(CACHEDIR)/%.o: %.c
	mkdir -p $(@D)
	$(CC) $(CFLAGS) -MF $(CACHEDIR)/$*.d -o $@ -c $<
